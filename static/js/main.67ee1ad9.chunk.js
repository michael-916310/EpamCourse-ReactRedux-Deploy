(this["webpackJsonpfinal-task-react-redux"]=this["webpackJsonpfinal-task-react-redux"]||[]).push([[0],{30:function(e,t,a){e.exports=a(53)},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(14),c=a.n(i),o=a(12),s=a(29),l=(a(18),a(2)),m=a(9),u="/EpamCourse-ReactRedux-Deploy";function h(e){var t=e.searchString,a=e.searchArray,r=e.byTitle,n=e.byDirector,i=e.byID;return fetch("https://my-json-server.typicode.com/michael-916310/my-json-server/movies").then((function(e){if(e.ok)return e.json();throw new Error("Fetching data-wrong response-status:".concat(e.status))})).then((function(e){return e})).catch((function(e){return console.log(e)})).then((function(e){return e.filter((function(e){var c;if(r)c=e.title.toUpperCase();else{if(!n)return!!i&&(c=e.id,a.includes(c));c=e.director.toUpperCase()}return c.includes(t.toUpperCase())}))}))}var p=function(){var e=localStorage.getItem("favoritesArray"),t=[];return e&&(t=e.split(",")),t.map((function(e){return+e}))},d=function(e,t,a){return{type:"SET_FILM_LIST",filmList:e,lastSearchString:t,lastSearchByTitle:a}},f={searchString:"",searchByTitle:!0,filmList:[],lastSearchString:"",lastSearchByTitle:!0,isFetching:!1,isFetchingError:!1};var v={favoritesList:[],isFetching:!1};var E={posterUrl:"",title:"",year:"",runtime:"",plot:"",director:"",actors:"",filmList:[],isFetching:!1};var g=Object(l.c)({searchPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_STRING_CHANGE":return Object(m.a)({},e,{searchString:t.newSearchString});case"SEARCH_BY_TITLE":return Object(m.a)({},e,{searchByTitle:t.flag});case"SET_FILM_LIST":return Object(m.a)({},e,{filmList:t.filmList,lastSearchString:t.lastSearchString,lastSearchByTitle:t.lastSearchByTitle});case"IS_FETCHING":return Object(m.a)({},e,{isFetching:t.isFetching,isFetchingError:!1});default:return e}},favoritesPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAVORITES_FILM_LIST":return Object(m.a)({},e,{favoritesList:t.filmList});case"IS_FAVORITES_FETCHING":return Object(m.a)({},e,{isFetching:t.isFetching,isFetchingError:!1});default:return e}},filmPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILM_PAGE_SET_FILM_DESC":return Object(m.a)({},e,{posterUrl:t.posterUrl,title:t.title,year:t.year,runtime:t.runtime,plot:t.plot,director:t.director,actors:t.actors});case"FILM_PAGE_SET_FILM_LIST":return Object(m.a)({},e,{filmList:t.filmList});case"IS_FILM_PAGE_DESC_FETCHING":return Object(m.a)({},e,{isFetching:t.isFetching});default:return e}}}),_=Object(s.a)({reducer:g}),y=a(27),S=a(13),F=(a(39),a(40),a(19)),b=a(5),C=a(6),N=a(8),T=a(7),L=(a(41),a(42),function(e){Object(N.a)(a,e);var t=Object(T.a)(a);function a(e){var r;return Object(b.a)(this,a),(r=t.call(this,e)).el=document.createElement("div"),r.modalRoot=document.getElementById("modal-root"),r}return Object(C.a)(a,[{key:"componentDidMount",value:function(){this.modalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.modalRoot.removeChild(this.el)}},{key:"render",value:function(){return c.a.createPortal(this.props.children,this.el)}}]),a}(n.a.Component)),I=function(e){Object(N.a)(a,e);var t=Object(T.a)(a);function a(e){var r;return Object(b.a)(this,a),(r=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=document.querySelector(".search-comp__search-string");t&&t.value?r.props.onSubmit():r.setState({showModalEmptySearch:!0})},r.handleByTitleClick=function(){r.props.onSearchByChange(!0)},r.handleByDirectorClick=function(){r.props.onSearchByChange(!1)},r.handleCloseModal=function(){r.setState({showModalEmptySearch:!1})},r.handleGoToFavorites=function(){window.location.assign("".concat(u,"/favorites"))},r.state={showModalEmptySearch:!1},r}return Object(C.a)(a,[{key:"render",value:function(){var e="search-comp__search-by-title",t="search-comp__search-by-director";return this.props.searchByTitle?e+=" search-comp__search-by_selected":t+=" search-comp__search-by_selected",n.a.createElement("div",{className:"search-comp-outer-container"},n.a.createElement("div",{className:"search-comp-inner-container"},n.a.createElement("div",{className:"search-comp__caption1"},"netflixroulette",n.a.createElement("input",{type:"button",className:"search-comp__button",onClick:this.handleGoToFavorites,value:"Go to FAVORITES"})),n.a.createElement("div",{className:"search-comp__caption2"},"FIND YOUR MOVIE"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("input",{type:"text",className:"search-comp__search-string",onChange:this.props.onSearchStringChange,value:this.props.searchString}),n.a.createElement("div",{className:"search-comp__buttom-line"},n.a.createElement("div",null,n.a.createElement("span",{className:"search-comp__search-by-caption"},"SEARCH BY"),n.a.createElement("input",{className:e,type:"button",onClick:this.handleByTitleClick,value:" TITLE "}),n.a.createElement("input",{className:t,type:"button",onClick:this.handleByDirectorClick,value:"DIRECTOR"})),n.a.createElement("div",null,n.a.createElement("input",{className:"search-comp__button",type:"submit",value:"  SEARCH  "})))),this.state.showModalEmptySearch&&n.a.createElement(L,null,n.a.createElement("div",{className:"search-comp__modal-nothing-to-search-background"},n.a.createElement("div",{className:"search-comp__modal-nothing-to-search-outer-container"},"There is nothing to search. Please enter non empty string to search.",n.a.createElement("div",{className:"search-comp__modal-nothing-to-search-button-container"},n.a.createElement("input",{className:"search-comp__modal-nothing-to-search-button",type:"button",value:"CLOSE",onClick:this.handleCloseModal})))))))}}]),a}(n.a.Component);a(43),a(44);function k(e){return n.a.createElement(L,null,n.a.createElement("div",{className:"modal-2-buttons__background"},n.a.createElement("div",{className:"modal-2-buttons__outer-container"},n.a.createElement("div",null,e.message),n.a.createElement("div",{className:"modal-2-buttons__button-container"},n.a.createElement("input",{className:"modal-2-buttons__action-button",type:"button",value:e.actionButtonName,onClick:e.onActionClick}),n.a.createElement("input",{className:"modal-2-buttons__action-button",type:"button",value:"CLOSE",onClick:e.onCloseClick})))))}var O=function(e){Object(N.a)(a,e);var t=Object(T.a)(a);function a(e){var r;return Object(b.a)(this,a),(r=t.call(this,e)).handleOpenModalClick=function(){r.props.flagAddToFavorites?r.setState({showModalAddToFavorites:!0}):r.props.flagRemoveFromFavorites&&r.setState({showModalRemoveFromFavorites:!0})},r.handleAddClick=function(){var e=localStorage.getItem("favoritesArray");if(e){var t=e.split(",");t.includes(""+r.props.id)||localStorage.setItem("favoritesArray",[].concat(Object(F.a)(t),[[r.props.id]]).join(","))}else localStorage.setItem("favoritesArray",[r.props.id].join(","));r.setState({showModalAddToFavorites:!1})},r.handleCloseClick=function(){r.setState({showModalAddToFavorites:!1,showModalRemoveFromFavorites:!1})},r.handleRemoveClick=function(e){var t=localStorage.getItem("favoritesArray");if(t){var a=t.split(",").filter((function(t){return!(Number(t)===Number(e))}));localStorage.setItem("favoritesArray",a.join(","))}r.handleCloseClick(),r.props.refreshFilms()},r.state={showModalAddToFavorites:!1,showModalRemoveFromFavorites:!1},r}return Object(C.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"film-card-comp-container"},n.a.createElement("img",{className:"film-card-comp__poster",src:this.props.posterUrl,alt:"film poster",onClick:this.props.onPosterClick}),n.a.createElement("div",{className:"film-card-comp__line1"},n.a.createElement("span",{className:"film-card-comp__title"},this.props.title),n.a.createElement("span",{className:"film-card-comp__year"},this.props.year)),n.a.createElement("div",{className:"film-card-comp__line2"},n.a.createElement("div",null,this.props.genres," ",n.a.createElement("br",null),"Runtime: ",this.props.runtime," minute ",n.a.createElement("br",null),"Director: ",this.props.director),n.a.createElement("img",{className:"film-card-comp__star",src:"".concat(u,"/img/favorites_star.ico"),alt:"star",onClick:this.handleOpenModalClick})),this.state.showModalAddToFavorites&&n.a.createElement(k,{message:'Add film "'.concat(this.props.title,'" by "').concat(this.props.director,'" to favorites?'),actionButtonName:"ADD",onActionClick:this.handleAddClick,onCloseClick:this.handleCloseClick}),this.state.showModalRemoveFromFavorites&&n.a.createElement(k,{message:'Remove film "'.concat(this.props.title,'" by "').concat(this.props.director,'" from favorites?'),actionButtonName:"REMOVE",onActionClick:function(){return e.handleRemoveClick(e.props.id)},onCloseClick:this.handleCloseClick}))}}]),a}(n.a.Component),A=(a(45),function(e){Object(N.a)(a,e);var t=Object(T.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"handlePosterClick",value:function(e){window.location.href="".concat(u,"/film/").concat(e)}},{key:"render",value:function(){var e=this,t=this.props.filmList.map((function(t){return n.a.createElement(O,{key:t.id,id:t.id,posterUrl:t.posterUrl,year:t.year,genres:t.genres.toString(),title:t.title,director:t.director,runtime:t.runtime,onPosterClick:function(){return e.handlePosterClick(t.title)},flagAddToFavorites:e.props.flagAddToFavorites,flagRemoveFromFavorites:e.props.flagRemoveFromFavorites,refreshFilms:e.props.refreshFilms})}));return n.a.createElement("div",{className:"film-list-outer-container"},n.a.createElement("div",{className:"film-list-inner-container"},this.props.renderFirstLine,n.a.createElement("div",{className:"film-list-comp__list"},t)))}}]),a}(n.a.Component));a(46);function j(e){return n.a.createElement("div",{className:"footer-comp-outer-container"},n.a.createElement("div",{className:"footer-comp-inner-container"},"netflixroulette"))}a(47);function B(e){return e.isLoading?n.a.createElement(L,null,n.a.createElement("div",{className:"spinner-comp-background"},n.a.createElement("img",{src:"".concat(u,"/img/load.gif"),alt:"spinner"}))):null}a(48);var R={searchStringChange:function(e){return{type:"SEARCH_STRING_CHANGE",newSearchString:e}},searchByTitleChange:function(e){return{type:"SEARCH_BY_TITLE",flag:e}},loadFilms:function(e){var t=e.searchString,a=e.searchByTitle;return function(e){return e({type:"IS_FETCHING",isFetching:!0}),h({searchString:t,byTitle:a,byDirector:!a}).then((function(r){e(d(r,t,a)),e({type:"IS_FETCHING",isFetching:!1})}))}},setFilmList:d},w=Object(o.b)((function(e){var t=e.searchPage;return{searchString:t.searchString,searchByTitle:t.searchByTitle,filmList:t.filmList,isFetching:t.isFetching,lastSearchString:t.lastSearchString,lastSearchByTitle:t.lastSearchByTitle}}),R)((function(e){var t,a=e.match.params.filmName||"",i=new URL(window.location.href);t=!i.searchParams.has("searchByTitle")||Boolean(i.searchParams.get("searchByTitle")),a===e.lastSearchString&&t===e.lastSearchByTitle||(e.loadFilms({searchString:a,searchByTitle:t}),e.searchStringChange(a),e.searchByTitleChange(t));var c=function(r){var n;n=r?function(e,t){return+e.year>+t.year?-1:1}:function(e,t){return+e.runtime>+t.runtime?-1:1};var i=Object(F.a)(e.filmList).sort(n);e.setFilmList(i,a,t)},o=function(e){e.preventDefault(),c(!1)},s=function(e){e.preventDefault(),c(!0)};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"search-page-header"},n.a.createElement(I,{searchString:e.searchString,searchByTitle:e.searchByTitle,onSearchStringChange:function(t){e.searchStringChange(t.target.value)},onSubmit:function(){if(a!==e.searchString||t!==e.SearchByTitle){var r=new URL("".concat(u,"/search/").concat(e.searchString),window.location.origin);r.searchParams.set("searchByTitle",e.searchByTitle?1:""),window.location.assign(r)}},onSearchByChange:function(t){e.searchByTitleChange(t)}})),n.a.createElement("div",{className:"search-page-result"},e.filmList.length?n.a.createElement(A,{renderFirstLine:function(){var t;return e.filmList.length&&(t=n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"film-list-comp__top-line"},n.a.createElement("div",null,e.filmList.length," movies found"),n.a.createElement("div",null,"SORT BY",n.a.createElement("a",{className:"film-list-comp__sort-by-release-date",href:"#",onClick:s},"release date"),n.a.createElement("a",{className:"film-list-comp__sort-by-runtime",href:"#",onClick:o},"runtime"))))),t}(),filmList:e.filmList,flagAddToFavorites:!0}):n.a.createElement("div",{className:"search-page-empty-result"},"No films found")),n.a.createElement("div",{className:"search-page-footer"},n.a.createElement(j,null)),n.a.createElement(B,{isLoading:e.isFetching}))}));a(49);function M(e){return n.a.createElement("div",{className:"film-detail-comp-outer-container"},n.a.createElement("div",{className:"film-detail-comp-inner-container"},n.a.createElement("div",{className:"film-detail-comp__first-line"},n.a.createElement("div",{className:"film-detail-comp__first-line-caption"},"netflixroulette"),n.a.createElement("div",null,n.a.createElement("input",{className:"film-detail-comp__first-line-button",type:"button",value:"Go to SEARCH",onClick:function(){window.location.href="".concat(u,"/search/").concat(e.director,"?searchByTitle=")}}),n.a.createElement("input",{className:"film-detail-comp__first-line-button",type:"button",value:"Go to FAVORITES",onClick:function(){window.location.assign("".concat(u,"/favorites"))}}))),n.a.createElement("div",{className:"film-detail-comp__totall-details-container"},n.a.createElement("div",{className:"film-detail-comp__poster"},n.a.createElement("img",{className:"film-detail-comp__poster-img",src:e.posterUrl,alt:"POSTER IMAGE"})),n.a.createElement("div",{className:"film-detail-comp__details"},n.a.createElement("div",{className:"film-detail-comp__title"},e.title),n.a.createElement("div",{className:"film-detail-comp__year"},e.year," ",e.runtime," min"),n.a.createElement("div",{className:"film-detail-comp__plot"},e.plot),n.a.createElement("div",{className:"film-detail-comp__director"},"Director: ",e.director),n.a.createElement("div",{className:"film-detail-comp__actors"},"Cast: ",e.actors)))))}a(50);var D=function(e){Object(N.a)(a,e);var t=Object(T.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"getFilmDesc",value:function(){var e=this.props.match.params.filmName;if(e)return this.props.loadFilmDesc(e)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.filmName;t&&this.props.loadFilmDesc(t).then((function(){e.props.director&&e.props.loadFilmByDirector(e.props.director)}))}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"film-page-header"},n.a.createElement(M,{posterUrl:this.props.posterUrl,title:this.props.title,year:this.props.year,runtime:this.props.runtime,plot:this.props.plot,director:this.props.director,actors:this.props.actors})),n.a.createElement("div",{className:"film-page-content"},n.a.createElement(A,{renderFirstLine:n.a.createElement("div",null,"Films by ",this.props.director," "),filmList:this.props.filmList,flagAddToFavorites:!0})),n.a.createElement("div",{className:"film-page-footer"},n.a.createElement(j,null)),n.a.createElement(B,{isLoading:this.props.isLoading}))}}]),a}(n.a.Component),G={loadFilmDesc:function(e){return function(t){return t({type:"IS_FILM_PAGE_DESC_FETCHING",isFetching:!0}),h({searchString:e,byTitle:!0}).then((function(e){Array.isArray(e)&&1===e.length&&t(function(e){return{type:"FILM_PAGE_SET_FILM_DESC",posterUrl:e.posterUrl,title:e.title,year:e.year,runtime:e.runtime,plot:e.plot,director:e.director,actors:e.actors}}(e[0])),t({type:"IS_FILM_PAGE_DESC_FETCHING",isFetching:!1})}))}},loadFilmByDirector:function(e){return function(t){return t({type:"IS_FILM_PAGE_DESC_FETCHING",isFetching:!0}),h({searchString:e,byDirector:!0}).then((function(e){e.length>0&&t(function(e){return{type:"FILM_PAGE_SET_FILM_LIST",filmList:e}}(e)),t({type:"IS_FILM_PAGE_DESC_FETCHING",isFetching:!1})}))}}},P=Object(o.b)((function(e){var t=e.filmPage;return{posterUrl:t.posterUrl,title:t.title,year:t.year,runtime:t.runtime,plot:t.plot,director:t.director,actors:t.actors,filmList:t.filmList,isLoading:t.isFetching}}),G)(D),H=(a(51),function(e){Object(N.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(b.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).refreshFilms=function(){e.props.loadFavoritesFilmList(p())},e}return Object(C.a)(a,[{key:"componentDidMount",value:function(){this.props.loadFavoritesFilmList(p())}},{key:"handleGoToSerach",value:function(){window.location.assign("".concat(u))}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"favorites-page-header"},n.a.createElement("div",{className:"favorites-page-outer-container"},n.a.createElement("div",{className:"favorites-page-inner-container"},n.a.createElement("div",{className:"favorites-page-container"},n.a.createElement("div",{className:"favorites-page-caption"},"YOUR FAVORITES FILMS"),n.a.createElement("div",null,n.a.createElement("input",{type:"button",className:"favorites-page-button",onClick:this.handleGoToSerach,value:"go to SEARCH"})))))),n.a.createElement("div",{className:"favorites-page-film-list"},0===this.props.favoritesList.length?n.a.createElement("div",{className:"favorites-page-empty-result"},"No films added to favorites"):n.a.createElement(A,{filmList:this.props.favoritesList,flagRemoveFromFavorites:!0,refreshFilms:this.refreshFilms})),n.a.createElement("div",{className:"favorites-page-fotter"},n.a.createElement(j,null)),n.a.createElement(B,{isLoading:this.props.isFetching}))}}]),a}(n.a.Component)),U={loadFavoritesFilmList:function(e){return function(t){return t({type:"IS_FAVORITES_FETCHING",isFetching:!0}),h({searchArray:e,byID:!0}).then((function(e){t({type:"SET_FAVORITES_FILM_LIST",filmList:e}),t({type:"IS_FAVORITES_FETCHING",isFetching:!1})}))}}},V=Object(o.b)((function(e){return{favoritesList:e.favoritesPage.favoritesList,isFetching:e.favoritesPage.isFetching}}),U)(H);var x=function(){return n.a.createElement("div",{className:"application-container"},n.a.createElement(y.a,{basename:u},n.a.createElement(S.c,null,n.a.createElement(S.a,{path:"/search/:filmName",component:w}),n.a.createElement(S.a,{path:"/film/:filmName",component:P}),n.a.createElement(S.a,{path:"/favorites",component:V}),n.a.createElement(S.a,{path:"/",component:w}))))};c.a.render(n.a.createElement(o.a,{store:_},n.a.createElement(n.a.StrictMode,null,n.a.createElement(x,null))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.67ee1ad9.chunk.js.map